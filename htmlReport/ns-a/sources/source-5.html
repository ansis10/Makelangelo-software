


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > MainMenu</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.marginallyclever.makelangelo</a>
</div>

<h1>Coverage Summary for Class: MainMenu (com.marginallyclever.makelangelo)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MainMenu</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/37)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/317)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MainMenu$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainMenu$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainMenu$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainMenu$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainMenu$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/47)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/332)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.marginallyclever.makelangelo;
&nbsp;
&nbsp;import com.hopding.jrpicam.exceptions.FailedToRunRaspistillException;
&nbsp;import com.marginallyclever.convenience.helpers.StringHelper;
&nbsp;import com.marginallyclever.convenience.log.Log;
&nbsp;import com.marginallyclever.convenience.log.LogPanel;
&nbsp;import com.marginallyclever.makelangelo.firmwareuploader.FirmwareUploaderPanel;
&nbsp;import com.marginallyclever.makelangelo.makeart.TurtleModifierAction;
&nbsp;import com.marginallyclever.makelangelo.makeart.io.OpenFileChooser;
&nbsp;import com.marginallyclever.makelangelo.makeart.tools.*;
&nbsp;import com.marginallyclever.makelangelo.makeart.turtlegenerator.TurtleGenerator;
&nbsp;import com.marginallyclever.makelangelo.makeart.turtlegenerator.TurtleGeneratorFactory;
&nbsp;import com.marginallyclever.makelangelo.makeart.turtlegenerator.TurtleGeneratorPanel;
&nbsp;import com.marginallyclever.makelangelo.applicationsettings.GFXPreferences;
&nbsp;import com.marginallyclever.makelangelo.applicationsettings.ApplicationSettings;
&nbsp;import com.marginallyclever.makelangelo.paper.PaperSettingsPanel;
&nbsp;import com.marginallyclever.makelangelo.plotter.PiCaptureAction;
&nbsp;import com.marginallyclever.makelangelo.plotter.marlinsimulation.MarlinSimulation;
&nbsp;import com.marginallyclever.makelangelo.plotter.plottercontrols.PlotterControls;
&nbsp;import com.marginallyclever.makelangelo.plotter.plottersettings.PlotterSettingsManagerPanel;
&nbsp;import com.marginallyclever.makelangelo.turtle.Turtle;
&nbsp;import com.marginallyclever.makelangelo.turtle.turtlerenderer.TurtleRenderFactory;
&nbsp;import com.marginallyclever.makelangelo.turtle.turtlerenderer.TurtleRenderer;
&nbsp;import org.slf4j.Logger;
&nbsp;import org.slf4j.LoggerFactory;
&nbsp;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.*;
&nbsp;import java.io.IOException;
&nbsp;import java.net.URI;
&nbsp;import java.util.Arrays;
&nbsp;import java.util.Locale;
&nbsp;import java.util.Objects;
&nbsp;
&nbsp;public class MainMenu extends JMenuBar {
<b class="nc">&nbsp;    private static final Logger logger = LoggerFactory.getLogger(MainMenu.class);</b>
<b class="nc">&nbsp;    private static int SHORTCUT_CTRL = InputEvent.CTRL_DOWN_MASK;</b>
<b class="nc">&nbsp;    private static int SHORTCUT_ALT = InputEvent.ALT_DOWN_MASK;</b>
&nbsp;    private final Makelangelo app;
<b class="nc">&nbsp;    private final SaveDialog saveDialog = new SaveDialog();</b>
&nbsp;    private RecentFiles recentFiles;
<b class="nc">&nbsp;    private final ApplicationSettings myPreferencesPanel = new ApplicationSettings();</b>
<b class="nc">&nbsp;    private boolean isMacOS = false;</b>
&nbsp;
&nbsp;    public MainMenu(Makelangelo app) {
<b class="nc">&nbsp;        super();</b>
<b class="nc">&nbsp;        this.app = app;</b>
<b class="nc">&nbsp;        setSystemLookAndFeelForMacos();</b>
<b class="nc">&nbsp;        add(createFileMenu());</b>
<b class="nc">&nbsp;        add(createSettingsMenu());</b>
<b class="nc">&nbsp;        add(createGenerateMenu());</b>
<b class="nc">&nbsp;        add(createToolsMenu());</b>
<b class="nc">&nbsp;        add(createViewMenu());</b>
<b class="nc">&nbsp;        add(createRobotMenu());</b>
<b class="nc">&nbsp;        add(createHelpMenu());</b>
<b class="nc">&nbsp;        updateUI();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private void setSystemLookAndFeelForMacos() {
<b class="nc">&nbsp;        String os = System.getProperty(&quot;os.name&quot;).toLowerCase(Locale.ENGLISH);</b>
<b class="nc">&nbsp;        if ((os.contains(&quot;mac&quot;)) || (os.contains(&quot;darwin&quot;))) {</b>
<b class="nc">&nbsp;            isMacOS=true;</b>
<b class="nc">&nbsp;            System.setProperty(&quot;apple.laf.useScreenMenuBar&quot;, &quot;true&quot;);</b>
<b class="nc">&nbsp;            SHORTCUT_CTRL = InputEvent.META_DOWN_MASK;</b>
<b class="nc">&nbsp;            SHORTCUT_ALT = InputEvent.META_DOWN_MASK;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createFileMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;MenuMakelangelo&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;f&#39;);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonNewFile = new JMenuItem(Translator.get(&quot;MenuNewFile&quot;));</b>
<b class="nc">&nbsp;        buttonNewFile.addActionListener((e) -&gt; newFile());</b>
<b class="nc">&nbsp;        buttonNewFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, SHORTCUT_CTRL));//&quot;ctrl N&quot;</b>
<b class="nc">&nbsp;        buttonNewFile.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-new-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonNewFile);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonOpenFile = new JMenuItem(Translator.get(&quot;MenuOpenFile&quot;));</b>
<b class="nc">&nbsp;        buttonOpenFile.addActionListener((e) -&gt; openLoadFile());</b>
<b class="nc">&nbsp;        buttonOpenFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O, SHORTCUT_CTRL));//&quot;ctrl O&quot;</b>
<b class="nc">&nbsp;        buttonOpenFile.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-load-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonOpenFile);</b>
&nbsp;
<b class="nc">&nbsp;        recentFiles = new RecentFiles(Translator.get(&quot;MenuReopenFile&quot;));</b>
<b class="nc">&nbsp;        recentFiles.addSubmenuListener((e)-&gt; app.openFile(((JMenuItem)e.getSource()).getText()));</b>
<b class="nc">&nbsp;        menu.add(recentFiles);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonImportFile = new JMenuItem(Translator.get(&quot;MenuImportFile&quot;));</b>
<b class="nc">&nbsp;        buttonImportFile.addActionListener((e) -&gt; app.importFile());</b>
<b class="nc">&nbsp;        buttonImportFile.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-import-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonImportFile);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonSaveFile = new JMenuItem(Translator.get(&quot;MenuSaveFile&quot;));</b>
<b class="nc">&nbsp;        buttonSaveFile.addActionListener((e) -&gt; saveFile());</b>
<b class="nc">&nbsp;        buttonSaveFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, SHORTCUT_CTRL));//&quot;ctrl S&quot;</b>
<b class="nc">&nbsp;        buttonSaveFile.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-save-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonSaveFile);</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonAdjustPreferences = new JMenuItem(Translator.get(&quot;ApplicationSettings.title&quot;));</b>
<b class="nc">&nbsp;        buttonAdjustPreferences.addActionListener((e)-&gt; myPreferencesPanel.run(SwingUtilities.getWindowAncestor(this)));</b>
<b class="nc">&nbsp;        if (isMacOS) {</b>
<b class="nc">&nbsp;            buttonAdjustPreferences.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_COMMA, SHORTCUT_CTRL));//&quot;cmd ,&quot;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            buttonAdjustPreferences.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_P, SHORTCUT_ALT));//&quot;alt P&quot;</b>
&nbsp;        }
<b class="nc">&nbsp;        buttonAdjustPreferences.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-settings-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonAdjustPreferences);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonFirmwareUpdate = new JMenuItem(Translator.get(&quot;FirmwareUpdate&quot;));</b>
<b class="nc">&nbsp;        buttonFirmwareUpdate.addActionListener((e) -&gt; runFirmwareUpdate());</b>
<b class="nc">&nbsp;        buttonFirmwareUpdate.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-install-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonFirmwareUpdate);</b>
&nbsp;
<b class="nc">&nbsp;        if (!isMacOS) {</b>
<b class="nc">&nbsp;            menu.addSeparator();</b>
&nbsp;
<b class="nc">&nbsp;            JMenuItem buttonExit = new JMenuItem(Translator.get(&quot;MenuQuit&quot;));</b>
<b class="nc">&nbsp;            buttonExit.addActionListener((e) -&gt; {</b>
<b class="nc">&nbsp;                WindowEvent windowClosing = new WindowEvent(SwingUtilities.getWindowAncestor(this), WindowEvent.WINDOW_CLOSING);</b>
<b class="nc">&nbsp;                Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(windowClosing);</b>
&nbsp;            });
<b class="nc">&nbsp;            buttonExit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, SHORTCUT_CTRL));//&quot;ctrl Q&quot;</b>
<b class="nc">&nbsp;            buttonExit.setMnemonic(&#39;Q&#39;);</b>
<b class="nc">&nbsp;            buttonExit.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-stop-16.png&quot;))));</b>
<b class="nc">&nbsp;            menu.add(buttonExit);</b>
&nbsp;        }
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void newFile() {
<b class="nc">&nbsp;        app.setTurtle(new Turtle());</b>
<b class="nc">&nbsp;        app.setMainTitle(&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void openLoadFile() {
<b class="nc">&nbsp;        logger.debug(&quot;Open file...&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        OpenFileChooser openFileChooser = new OpenFileChooser(SwingUtilities.getWindowAncestor(this));</b>
<b class="nc">&nbsp;        openFileChooser.setOpenListener(app::openFile);</b>
<b class="nc">&nbsp;        openFileChooser.chooseFile();</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createViewMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;MenuView&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;V&#39;);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonZoomOut = new JMenuItem(Translator.get(&quot;MenuView.zoomOut&quot;), KeyEvent.VK_MINUS);</b>
<b class="nc">&nbsp;        buttonZoomOut.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_MINUS, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        buttonZoomOut.addActionListener((e) -&gt; app.getCamera().zoom(1));</b>
<b class="nc">&nbsp;        buttonZoomOut.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-zoom-out-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonZoomOut);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonZoomIn = new JMenuItem(Translator.get(&quot;MenuView.zoomIn&quot;), KeyEvent.VK_EQUALS);</b>
<b class="nc">&nbsp;        buttonZoomIn.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        buttonZoomIn.addActionListener((e) -&gt; app.getCamera().zoom(-1));</b>
<b class="nc">&nbsp;        buttonZoomIn.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-zoom-in-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonZoomIn);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonZoomToFit = new JMenuItem(Translator.get(&quot;MenuView.zoomFit&quot;), KeyEvent.VK_0);</b>
<b class="nc">&nbsp;        buttonZoomToFit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_0, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        buttonZoomToFit.addActionListener((e) -&gt; app.getCamera().zoomToFit(app.getPaper().getPaperWidth(),app.getPaper().getPaperHeight()));</b>
<b class="nc">&nbsp;        menu.add(buttonZoomToFit);</b>
&nbsp;
<b class="nc">&nbsp;        JCheckBoxMenuItem checkboxShowPenUpMoves = new JCheckBoxMenuItem(Translator.get(&quot;GFXPreferences.showPenUp&quot;), GFXPreferences.getShowPenUp());</b>
<b class="nc">&nbsp;        checkboxShowPenUpMoves.setAccelerator(KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_M, SHORTCUT_CTRL));//&quot;ctrl M&quot;</b>
<b class="nc">&nbsp;        checkboxShowPenUpMoves.addActionListener((e) -&gt; {</b>
<b class="nc">&nbsp;            boolean b = GFXPreferences.getShowPenUp();</b>
<b class="nc">&nbsp;            GFXPreferences.setShowPenUp(!b);</b>
&nbsp;        });
<b class="nc">&nbsp;        GFXPreferences.addListener((e)-&gt;{</b>
<b class="nc">&nbsp;            checkboxShowPenUpMoves.setSelected ((boolean)e.getNewValue());</b>
&nbsp;        });
<b class="nc">&nbsp;        checkboxShowPenUpMoves.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-plane-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(checkboxShowPenUpMoves);</b>
&nbsp;
<b class="nc">&nbsp;        menu.add(createRenderStyleMenu());</b>
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createHelpMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;Help&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;H&#39;);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonViewLog = new JMenuItem(Translator.get(&quot;ShowLog&quot;));</b>
<b class="nc">&nbsp;        buttonViewLog.addActionListener((e) -&gt; runLogPanel());</b>
<b class="nc">&nbsp;        buttonViewLog.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, SHORTCUT_CTRL));//&quot;ctrl L&quot;</b>
<b class="nc">&nbsp;        menu.add(buttonViewLog);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonLogFolder = new JMenuItem(Translator.get(&quot;OpenLogFolder&quot;));</b>
<b class="nc">&nbsp;        buttonLogFolder.addActionListener((e) -&gt; openLogDirectory());</b>
<b class="nc">&nbsp;        buttonLogFolder.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-folder-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonLogFolder);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonReportBug = createMenuItemBrowse(Translator.get(&quot;ReportBug&quot;),&quot;https://github.com/MarginallyClever/Makelangelo-Software/issues&quot;);</b>
<b class="nc">&nbsp;        buttonReportBug.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;icons8-bug-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonReportBug);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonManual = createMenuItemBrowse(Translator.get(&quot;MenuManual&quot;), &quot;https://mcr.dozuki.com/c/Makelangelo_3_and_5_Guide&quot;);</b>
<b class="nc">&nbsp;        buttonManual.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-open-book-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonManual);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonForums = createMenuItemBrowse(Translator.get(&quot;MenuForums&quot;), &quot;https://discord.gg/Q5TZFmB&quot;);</b>
<b class="nc">&nbsp;        buttonForums.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-discord-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(buttonForums);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonDonation = createMenuItemBrowse(Translator.get(&quot;MenuItemPayPalDonation&quot;), &quot;https://www.marginallyclever.com/products/makelangelo-software/&quot;);</b>
<b class="nc">&nbsp;        menu.add(buttonDonation);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem buttonCheckForUpdate = new JMenuItem(Translator.get(&quot;MenuUpdate&quot;));</b>
<b class="nc">&nbsp;        buttonCheckForUpdate.addActionListener((e) -&gt; app.checkForUpdate(true));</b>
&nbsp;        //buttonCheckForUpdate.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-update-16.png&quot;))));
<b class="nc">&nbsp;        menu.add(buttonCheckForUpdate);</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
&nbsp;
<b class="nc">&nbsp;        if (!isMacOS) {</b>
<b class="nc">&nbsp;            JMenuItem buttonAbout = new JMenuItem(Translator.get(&quot;MenuAbout&quot;));</b>
<b class="nc">&nbsp;            buttonAbout.addActionListener((e) -&gt; app.onDialogAbout());</b>
<b class="nc">&nbsp;            menu.add(buttonAbout);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void openLogDirectory() {
&nbsp;        try {
<b class="nc">&nbsp;            Desktop.getDesktop().open(Log.logDir);</b>
<b class="nc">&nbsp;        } catch (IOException e1) {</b>
<b class="nc">&nbsp;            logger.error(&quot;Can&#39;t open log folder&quot;, e1);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public JMenuItem createMenuItemBrowse(String menuLabelAlreadyTranslated, String urlAsString) {
<b class="nc">&nbsp;        JMenuItem jmi = new JMenuItem(menuLabelAlreadyTranslated);</b>
<b class="nc">&nbsp;        jmi.setToolTipText(urlAsString);</b>
<b class="nc">&nbsp;        jmi.addActionListener((e) -&gt; {</b>
&nbsp;            try {
<b class="nc">&nbsp;                if (Desktop.isDesktopSupported()) {</b>
<b class="nc">&nbsp;                    if (Desktop.getDesktop().isSupported(Desktop.Action.BROWSE)) {</b>
<b class="nc">&nbsp;                        java.awt.Desktop.getDesktop().browse(URI.create(urlAsString));</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        logger.error(&quot;Desktop.Action.BROWSE not supported. Can&#39;t open the browser to &quot; + urlAsString);</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    logger.error(&quot;Desktop not supported. Can&#39;t open the browser to &quot; + urlAsString);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;            } catch (IOException ioe) {</b>
<b class="nc">&nbsp;                logger.error(&quot;Can&#39;t open the browser to &quot;+urlAsString, ioe);</b>
&nbsp;            }
&nbsp;        });
<b class="nc">&nbsp;        return jmi;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void runLogPanel() {
<b class="nc">&nbsp;        LogPanel.runAsDialog(SwingUtilities.getWindowAncestor(this));</b>
&nbsp;    }
&nbsp;
&nbsp;    private void saveFile() {
<b class="nc">&nbsp;        logger.debug(&quot;Saving vector file...&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            saveDialog.run(app.getTurtle(), SwingUtilities.getWindowAncestor(this),app.getPlotter().getSettings());</b>
<b class="nc">&nbsp;        } catch(Exception e) {</b>
<b class="nc">&nbsp;            logger.error(&quot;Error while saving the vector file&quot;, e);</b>
<b class="nc">&nbsp;            JOptionPane.showMessageDialog(SwingUtilities.getWindowAncestor(this), Translator.get(&quot;SaveError&quot;) + e.getLocalizedMessage(), Translator.get(&quot;ErrorTitle&quot;), JOptionPane.ERROR_MESSAGE);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private void runFirmwareUpdate() {
<b class="nc">&nbsp;        JDialog dialog = new JDialog(SwingUtilities.getWindowAncestor(this),&quot;Firmware Update&quot;);</b>
<b class="nc">&nbsp;        dialog.add(new FirmwareUploaderPanel());</b>
<b class="nc">&nbsp;        dialog.pack();</b>
<b class="nc">&nbsp;        dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor(this));</b>
&nbsp;
<b class="nc">&nbsp;        app.enableMenuBar(false);</b>
<b class="nc">&nbsp;        dialog.addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                app.enableMenuBar(true);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        dialog.setVisible(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createGenerateMenu() {
<b class="nc">&nbsp;        return createGeneratorMenuFromTree(TurtleGeneratorFactory.available);</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createGeneratorMenuFromTree(TurtleGeneratorFactory.TurtleGeneratorNode root) {
<b class="nc">&nbsp;        JMenu menu = new JMenu(root.getName());</b>
<b class="nc">&nbsp;        for (TurtleGeneratorFactory.TurtleGeneratorNode child : root.getChildren()) {</b>
<b class="nc">&nbsp;            if (child.getChildren().isEmpty()) {</b>
<b class="nc">&nbsp;                JMenuItem menuItem = new JMenuItem(child.getName());</b>
<b class="nc">&nbsp;                menu.add(menuItem);</b>
<b class="nc">&nbsp;                menuItem.addActionListener((e) -&gt; runGeneratorDialog(child.getGenerator()));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                JMenu subMenu = createGeneratorMenuFromTree(child);</b>
<b class="nc">&nbsp;                menu.add(subMenu);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void runGeneratorDialog(TurtleGenerator turtleGenerator) {
<b class="nc">&nbsp;        turtleGenerator.setPaper(app.getPaper());</b>
<b class="nc">&nbsp;        turtleGenerator.addListener(app::setTurtle);</b>
<b class="nc">&nbsp;        turtleGenerator.setTurtle(app.getTurtle());</b>
<b class="nc">&nbsp;        turtleGenerator.generate();</b>
&nbsp;
<b class="nc">&nbsp;        if(turtleGenerator.getPanelElements().isEmpty()) {</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        app.setMainTitle(turtleGenerator.getName());</b>
<b class="nc">&nbsp;        JDialog dialog = new JDialog(SwingUtilities.getWindowAncestor(this), turtleGenerator.getName());</b>
<b class="nc">&nbsp;        TurtleGeneratorPanel panel = new TurtleGeneratorPanel(turtleGenerator);</b>
<b class="nc">&nbsp;        dialog.add(panel);</b>
<b class="nc">&nbsp;        dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor(this));</b>
<b class="nc">&nbsp;        dialog.setMinimumSize(new Dimension(300,300));</b>
<b class="nc">&nbsp;        dialog.pack();</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        app.enableMenuBar(false);</b>
<b class="nc">&nbsp;        dialog.addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                app.enableMenuBar(true);</b>
<b class="nc">&nbsp;                app.getPaper().setRotationRef(0);</b>
<b class="nc">&nbsp;                logger.debug(&quot;Generation finished&quot;);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        dialog.setVisible(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createToolsMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;Art Pipeline&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;T&#39;);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            PiCaptureAction pc = new PiCaptureAction();</b>
&nbsp;
<b class="nc">&nbsp;            JButton bCapture = new JButton(Translator.get(&quot;MenuCaptureImage&quot;));</b>
<b class="nc">&nbsp;            bCapture.addActionListener((e)-&gt; pc.run((Frame)SwingUtilities.getWindowAncestor(this),app.getPaper()));</b>
<b class="nc">&nbsp;            bCapture.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-camera-16.png&quot;))));</b>
<b class="nc">&nbsp;            menu.add(bCapture);</b>
<b class="nc">&nbsp;            menu.addSeparator();</b>
<b class="nc">&nbsp;        } catch (FailedToRunRaspistillException e) {</b>
<b class="nc">&nbsp;            logger.debug(&quot;PiCaptureAction unavailable.&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        menu.add(createActionMenuItem(new ResizeTurtleToPaperAction(app.getPaper(),false,Translator.get(&quot;ConvertImagePaperFit&quot;))));</b>
<b class="nc">&nbsp;        menu.add(createActionMenuItem(new ResizeTurtleToPaperAction(app.getPaper(),true,Translator.get(&quot;ConvertImagePaperFill&quot;))));</b>
<b class="nc">&nbsp;        menu.add(createActionMenuItem(new CenterTurtleToPaperAction(Translator.get(&quot;ConvertImagePaperCenter&quot;))));</b>
&nbsp;
<b class="nc">&nbsp;        menu.add(createMover(Translator.get(&quot;Translate&quot;),&quot;/com/marginallyclever/makelangelo/icons8-move-16.png&quot;,(e)-&gt;runTranslatePanel()));</b>
<b class="nc">&nbsp;        menu.add(createMover(Translator.get(&quot;Scale&quot;),&quot;/com/marginallyclever/makelangelo/icons8-resize-16.png&quot;,(e)-&gt;runScalePanel()));</b>
<b class="nc">&nbsp;        menu.add(createMover(Translator.get(&quot;Rotate&quot;),&quot;/com/marginallyclever/makelangelo/icons8-rotate-16.png&quot;,(e)-&gt;runRotatePanel()));</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
&nbsp;
<b class="nc">&nbsp;        TurtleModifierAction a4 = new FlipTurtleAction(1,-1,Translator.get(&quot;FlipV&quot;));</b>
<b class="nc">&nbsp;        a4.putValue(Action.SMALL_ICON, new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-flip-horizontal-16.png&quot;))));</b>
<b class="nc">&nbsp;        a4.setSource(app);</b>
<b class="nc">&nbsp;        a4.addModifierListener(app::setTurtle);</b>
<b class="nc">&nbsp;        menu.add(a4);</b>
&nbsp;
<b class="nc">&nbsp;        TurtleModifierAction a5 = new FlipTurtleAction(-1,1,Translator.get(&quot;FlipH&quot;));</b>
<b class="nc">&nbsp;        a5.putValue(Action.SMALL_ICON, new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-flip-vertical-16.png&quot;))));</b>
<b class="nc">&nbsp;        a5.setSource(app);</b>
<b class="nc">&nbsp;        a5.addModifierListener(app::setTurtle);</b>
<b class="nc">&nbsp;        menu.add(a5);</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
&nbsp;
<b class="nc">&nbsp;        TurtleModifierAction a1 = createModifier(new SimplifyTurtleAction(),null);</b>
<b class="nc">&nbsp;        a1.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_Y, SHORTCUT_CTRL));//&quot;ctrl Y&quot;</b>
&nbsp;        //a1.putValue(Action.SMALL_ICON,new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-simplify-16.png&quot;))));
<b class="nc">&nbsp;        menu.add(a1);</b>
&nbsp;
<b class="nc">&nbsp;        TurtleModifierAction a2 = createModifier(new ReorderTurtleAction(),&quot;/com/marginallyclever/makelangelo/icons8-sort-16.png&quot;);</b>
<b class="nc">&nbsp;        a2.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_R, SHORTCUT_CTRL));//&quot;ctrl R&quot;</b>
<b class="nc">&nbsp;        menu.add(a2);</b>
&nbsp;
<b class="nc">&nbsp;        TurtleModifierAction a3 = createModifier(new InfillTurtleAction(), &quot;/com/marginallyclever/makelangelo/icons8-fill-color-16.png&quot;);</b>
<b class="nc">&nbsp;        a3.putValue(Action.ACCELERATOR_KEY, KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_I, SHORTCUT_CTRL));//&quot;ctrl I&quot;</b>
<b class="nc">&nbsp;        menu.add(a3);</b>
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private TurtleModifierAction createModifier(TurtleModifierAction action, String resource) {
<b class="nc">&nbsp;        if(resource!=null) {</b>
<b class="nc">&nbsp;            action.putValue(Action.SMALL_ICON, new ImageIcon(Objects.requireNonNull(getClass().getResource(resource))));</b>
&nbsp;        }
<b class="nc">&nbsp;        action.setSource(app);</b>
<b class="nc">&nbsp;        action.addModifierListener(app::setTurtle);</b>
&nbsp;
<b class="nc">&nbsp;        return action;</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenuItem createMover(String label, String resource, ActionListener listener) {
<b class="nc">&nbsp;        JMenuItem menuItem = new JMenuItem(label);</b>
<b class="nc">&nbsp;        menuItem.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(resource))));</b>
<b class="nc">&nbsp;        menuItem.addActionListener(listener);</b>
<b class="nc">&nbsp;        return menuItem;</b>
&nbsp;    }
&nbsp;
&nbsp;    private TurtleModifierAction createActionMenuItem(TurtleModifierAction action) {
<b class="nc">&nbsp;        action.setSource(app);</b>
<b class="nc">&nbsp;        action.addModifierListener(app::setTurtle);</b>
<b class="nc">&nbsp;        return action;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void runRotatePanel() {
<b class="nc">&nbsp;        RotateTurtlePanel.runAsDialog(SwingUtilities.getWindowAncestor(this), app.getTurtle());</b>
&nbsp;    }
&nbsp;
&nbsp;    private void runScalePanel() {
<b class="nc">&nbsp;        ScaleTurtlePanel.runAsDialog(SwingUtilities.getWindowAncestor(this), app.getTurtle());</b>
&nbsp;    }
&nbsp;
&nbsp;    private void runTranslatePanel() {
<b class="nc">&nbsp;        TranslateTurtlePanel.runAsDialog(SwingUtilities.getWindowAncestor(this), app.getTurtle());</b>
&nbsp;    }
&nbsp;  
&nbsp;    private JMenu createRobotMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;Robot&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;k&#39;);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem bEstimate = new JMenuItem(Translator.get(&quot;RobotMenu.GetTimeEstimate&quot;));</b>
<b class="nc">&nbsp;        bEstimate.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_E, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        bEstimate.addActionListener((e)-&gt; estimateTime());</b>
<b class="nc">&nbsp;        bEstimate.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-stopwatch-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(bEstimate);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem bSaveToSD = new JMenuItem(Translator.get(&quot;RobotMenu.SaveGCode&quot;));</b>
<b class="nc">&nbsp;        bSaveToSD.addActionListener((e)-&gt; app.saveGCode());</b>
<b class="nc">&nbsp;        bSaveToSD.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_G, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        bSaveToSD.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-export-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(bSaveToSD);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem bOpenControls = new JMenuItem(Translator.get(&quot;RobotMenu.OpenControls&quot;));</b>
<b class="nc">&nbsp;        bOpenControls.addActionListener((e)-&gt; openPlotterControls());</b>
<b class="nc">&nbsp;        bOpenControls.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_T, SHORTCUT_CTRL));</b>
<b class="nc">&nbsp;        bOpenControls.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource(&quot;/com/marginallyclever/makelangelo/icons8-joystick-16.png&quot;))));</b>
<b class="nc">&nbsp;        menu.add(bOpenControls);</b>
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenuItem createRenderStyleMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;RobotMenu.RenderStyle&quot;));</b>
&nbsp;
<b class="nc">&nbsp;        ButtonGroup group = new ButtonGroup();</b>
&nbsp;
<b class="nc">&nbsp;        Arrays.stream(TurtleRenderFactory.values())</b>
<b class="nc">&nbsp;                .forEach(iter -&gt; {</b>
<b class="nc">&nbsp;                    TurtleRenderer renderer = iter.getTurtleRenderer();</b>
<b class="nc">&nbsp;                    String name = iter.getName();</b>
<b class="nc">&nbsp;                    JRadioButtonMenuItem button = new JRadioButtonMenuItem(renderer.getTranslatedName());</b>
<b class="nc">&nbsp;                    if (app.getTurtleRenderer() == renderer) button.setSelected(true);</b>
<b class="nc">&nbsp;                    button.addActionListener((e)-&gt; onTurtleRenderChange(name));</b>
<b class="nc">&nbsp;                    menu.add(button);</b>
<b class="nc">&nbsp;                    group.add(button);</b>
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void onTurtleRenderChange(String name) {
<b class="nc">&nbsp;        logger.debug(&quot;Switching to render style &#39;{}&#39;&quot;, name);</b>
<b class="nc">&nbsp;        TurtleRenderer renderer = TurtleRenderFactory.findByName(name).getTurtleRenderer();</b>
<b class="nc">&nbsp;        app.setTurtleRenderer(renderer);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void estimateTime() {
<b class="nc">&nbsp;        MarlinSimulation ms = new MarlinSimulation(app.getPlotter().getSettings());</b>
<b class="nc">&nbsp;        int estimatedSeconds = (int)Math.ceil(ms.getTimeEstimate(app.getTurtle()));</b>
<b class="nc">&nbsp;        String timeAsString = StringHelper.getElapsedTime(estimatedSeconds);</b>
<b class="nc">&nbsp;        String message = Translator.get(&quot;EstimatedTimeIs&quot;,new String[]{timeAsString});</b>
<b class="nc">&nbsp;        JOptionPane.showMessageDialog(SwingUtilities.getWindowAncestor(this), message, Translator.get(&quot;RobotMenu.GetTimeEstimate&quot;), JOptionPane.INFORMATION_MESSAGE);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void openPlotterControls() {
<b class="nc">&nbsp;        JDialog dialog = new JDialog(SwingUtilities.getWindowAncestor(this), Translator.get(&quot;PlotterControls.Title&quot;));</b>
<b class="nc">&nbsp;        dialog.setPreferredSize(new Dimension(PlotterControls.DIMENSION_PANEL_WIDTH, PlotterControls.DIMENSION_PANEL_HEIGHT));</b>
<b class="nc">&nbsp;        dialog.setMinimumSize(new Dimension(PlotterControls.DIMENSION_PANEL_WIDTH, PlotterControls.DIMENSION_PANEL_HEIGHT));</b>
<b class="nc">&nbsp;        PlotterControls plotterControls = new PlotterControls(app.getPlotter(),app.getTurtle(), dialog);</b>
<b class="nc">&nbsp;        dialog.add(plotterControls);</b>
<b class="nc">&nbsp;        dialog.pack();</b>
&nbsp;
<b class="nc">&nbsp;        app.enableMenuBar(false);</b>
<b class="nc">&nbsp;        dialog.addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                plotterControls.onDialogClosing();</b>
<b class="nc">&nbsp;                app.enableMenuBar(true);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor(this));</b>
<b class="nc">&nbsp;        dialog.setVisible(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenu createSettingsMenu() {
<b class="nc">&nbsp;        JMenu menu = new JMenu(Translator.get(&quot;MenuSettings&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(&#39;S&#39;);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem bOpenPaperSettings = new JMenuItem(Translator.get(&quot;OpenPaperSettings&quot;));</b>
<b class="nc">&nbsp;        bOpenPaperSettings.addActionListener((e)-&gt; openPaperSettings());</b>
<b class="nc">&nbsp;        menu.add(bOpenPaperSettings);</b>
&nbsp;
<b class="nc">&nbsp;        JMenuItem bOpenPlotterSettings = new JMenuItem(Translator.get(&quot;OpenPlotterSettings&quot;));</b>
<b class="nc">&nbsp;        bOpenPlotterSettings.addActionListener((e)-&gt; openPlotterSettings());</b>
<b class="nc">&nbsp;        bOpenPlotterSettings.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_P, SHORTCUT_CTRL));//&quot;ctrl P&quot;</b>
<b class="nc">&nbsp;        menu.add(bOpenPlotterSettings);</b>
&nbsp;
<b class="nc">&nbsp;        return menu;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void openPlotterSettings() {
<b class="nc">&nbsp;        PlotterSettingsManagerPanel plotterSettingsPanel = new PlotterSettingsManagerPanel(app.getPlotterSettingsManager());</b>
<b class="nc">&nbsp;        plotterSettingsPanel.addListener(app::onPlotterSettingsUpdate);</b>
&nbsp;
<b class="nc">&nbsp;        JDialog dialog = new JDialog(SwingUtilities.getWindowAncestor(this),Translator.get(&quot;PlotterSettingsPanel.Title&quot;));</b>
<b class="nc">&nbsp;        dialog.add(plotterSettingsPanel);</b>
<b class="nc">&nbsp;        dialog.setMinimumSize(new Dimension(350,300));</b>
<b class="nc">&nbsp;        dialog.setResizable(false);</b>
<b class="nc">&nbsp;        dialog.pack();</b>
&nbsp;
<b class="nc">&nbsp;        app.enableMenuBar(false);</b>
<b class="nc">&nbsp;        dialog.addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                app.onPlotterSettingsUpdate(app.getPlotterSettingsManager().getLastSelectedProfile());</b>
<b class="nc">&nbsp;                app.enableMenuBar(true);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor(this));</b>
<b class="nc">&nbsp;        dialog.setVisible(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void openPaperSettings() {
<b class="nc">&nbsp;        PaperSettingsPanel settings = new PaperSettingsPanel(app.getPaper());</b>
<b class="nc">&nbsp;        JDialog dialog = new JDialog(SwingUtilities.getWindowAncestor(this),Translator.get(&quot;PaperSettings.Title&quot;));</b>
<b class="nc">&nbsp;        dialog.add(settings);</b>
<b class="nc">&nbsp;        dialog.setMinimumSize(new Dimension(300,300));</b>
<b class="nc">&nbsp;        dialog.pack();</b>
&nbsp;
<b class="nc">&nbsp;        app.enableMenuBar(false);</b>
<b class="nc">&nbsp;        dialog.addWindowListener(new WindowAdapter() {</b>
&nbsp;            @Override
&nbsp;            public void windowClosing(WindowEvent e) {
<b class="nc">&nbsp;                settings.save();</b>
<b class="nc">&nbsp;                app.enableMenuBar(true);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        dialog.setLocationRelativeTo(SwingUtilities.getWindowAncestor(this));</b>
<b class="nc">&nbsp;        dialog.setVisible(true);</b>
&nbsp;    }
&nbsp;
&nbsp;    public RecentFiles getRecentFiles() {
<b class="nc">&nbsp;        return recentFiles;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-10-07 20:00</div>
</div>
</body>
</html>
